{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/cliente.service\";\nimport * as i2 from \"src/app/services/cobranca.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction ClienteTableComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"span\", 6);\n    i0.ɵɵlistener(\"click\", function ClienteTableComponent_div_5_Template_span_click_2_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.isAddingCliente = !ctx_r3.isAddingCliente);\n    });\n    i0.ɵɵtext(3, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵtext(5, \"Add Cobranca\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ClienteTableComponent_div_5_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.addOrUpdateCliente());\n    });\n    i0.ɵɵelementStart(7, \"div\")(8, \"label\", 8);\n    i0.ɵɵtext(9, \"Nome:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 10);\n    i0.ɵɵtext(13, \"Documento:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\")(16, \"label\", 12);\n    i0.ɵɵtext(17, \"Endereco:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\")(20, \"label\", 14);\n    i0.ɵɵtext(21, \"Telefone:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 16);\n    i0.ɵɵtext(24, \"Registrar Cliente\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.clienteForm);\n  }\n}\nfunction ClienteTableComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"span\", 6);\n    i0.ɵɵlistener(\"click\", function ClienteTableComponent_div_6_Template_span_click_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.closeModal());\n    });\n    i0.ɵɵtext(3, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵtext(5, \"Add Cobranca\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"form\", 17);\n    i0.ɵɵlistener(\"ngSubmit\", function ClienteTableComponent_div_6_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.addCobranca());\n    });\n    i0.ɵɵelementStart(7, \"div\")(8, \"label\", 18);\n    i0.ɵɵtext(9, \"Valor:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function ClienteTableComponent_div_6_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.newCobranca.valor = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 20);\n    i0.ɵɵtext(13, \"Data Vencimento:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function ClienteTableComponent_div_6_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.newCobranca.dataVencimento = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\")(16, \"label\", 22);\n    i0.ɵɵtext(17, \"Descri\\u00E7\\u00E3o:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function ClienteTableComponent_div_6_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.newCobranca.descricao = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"button\", 16);\n    i0.ɵɵtext(20, \"Registrar Cobranca\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newCobranca.valor);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newCobranca.dataVencimento);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newCobranca.descricao);\n  }\n}\nfunction ClienteTableComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function ClienteTableComponent_tr_21_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const cliente_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.openCobrancaModal(cliente_r12.id));\n    });\n    i0.ɵɵtext(13, \"Adicionar Cobranca\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function ClienteTableComponent_tr_21_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const cliente_r12 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.deleteCliente(cliente_r12.id));\n    });\n    i0.ɵɵtext(15, \"Excluir\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cliente_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r12.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r12.documento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r12.telefone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r12.endereco);\n  }\n}\nexport class ClienteTableComponent {\n  /**\n   *\n   */\n  constructor(clienteService, cobrancaService, fb) {\n    this.clienteService = clienteService;\n    this.cobrancaService = cobrancaService;\n    this.fb = fb;\n    // clienteService: ClienteService\n    this.isAddingCliente = false;\n    this.addCobrancaMsg = {\n      clienteId: 0\n    };\n    this.initAddCobrancaEvent = new Subject();\n    this.isAddingCobranca = false;\n    this.clientes = [];\n    this.newCliente = {\n      id: 0,\n      usuarioId: 0,\n      documento: '',\n      nome: '',\n      telefone: '',\n      endereco: ''\n    };\n    this.isEditing = false;\n    this.currentClienteId = 0;\n    this.newCobranca = {\n      id: 0,\n      clienteId: 0,\n      valor: 0,\n      dataVencimento: new Date(),\n      pago: false,\n      descricao: ''\n    };\n    this.clienteForm = this.fb.group({\n      nome: ['', Validators.required],\n      documento: ['', Validators.required],\n      telefone: ['', Validators.required],\n      endereco: ['', Validators.required]\n    });\n  }\n  get inputToChild() {\n    return this.addCobrancaMsg;\n  }\n  set inputToChild(value) {\n    this.addCobrancaMsg = value;\n  }\n  ngOnInit() {\n    this.loadClientes();\n  }\n  loadClientes() {\n    this.clienteService.loadClientes().subscribe(clientes => {\n      this.clientes = clientes;\n      console.log('clientes:', clientes);\n    });\n  }\n  editCliente(cliente) {\n    if (!this.isEditing) {\n      console.log('client:', cliente);\n      return;\n    }\n    this.clienteService.editCliente(cliente);\n  }\n  deleteCliente(clienteId) {\n    console.log('clienteId:', clienteId);\n    this.clienteService.deleteCliente(clienteId).subscribe(_ => {\n      this.loadClientes();\n    });\n  }\n  addOrUpdateCliente() {\n    // this.clienteForm\n    const {\n      nome,\n      documento,\n      telefone,\n      endereco\n    } = this.clienteForm.value;\n    this.isAddingCliente = !this.isAddingCliente;\n  }\n  toggleModal(newState) {\n    console.log('newState:', newState);\n    this.isAddingCobranca = newState;\n  }\n  // cobranca operations\n  openCobrancaModal(clienteId) {\n    this.currentClienteId = clienteId;\n    this.newCobranca.clienteId = clienteId;\n    // this.initAddCobrancaEvent.next(clienteId)\n    this.isAddingCobranca = true;\n    // this.onAddCobrancaClick.emit(this.currentClienteId)\n    console.log('this.currentClienteId:', this.currentClienteId);\n  }\n  onCobrancaAdded(cobranca) {\n    console.log('New Cobranca Added:', cobranca);\n  }\n  openModal(clienteId) {\n    if (clienteId === 0) {\n      return;\n    }\n    this.newCobranca.clienteId = clienteId;\n  }\n  closeModal() {\n    this.currentClienteId = 0;\n  }\n  addCobranca() {\n    console.log('cobranca:', this.newCobranca);\n    this.newCobranca.clienteId = this.currentClienteId;\n    this.cobrancaService.createCobranca(this.newCobranca).subscribe(cobranca => {\n      // this.cobrancaAdded.emit(cobranca);\n      this.closeModal();\n    });\n  }\n  static #_ = this.ɵfac = function ClienteTableComponent_Factory(t) {\n    return new (t || ClienteTableComponent)(i0.ɵɵdirectiveInject(i1.ClienteService), i0.ɵɵdirectiveInject(i2.CobrancaService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ClienteTableComponent,\n    selectors: [[\"app-cliente-table\"]],\n    decls: 22,\n    vars: 3,\n    consts: [[1, \"container\"], [3, \"click\"], [\"class\", \"modal\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"close\", 3, \"click\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"nome\"], [\"id\", \"nome\", \"type\", \"text\", \"formControlName\", \"nome\", \"name\", \"nome\", \"required\", \"\"], [\"for\", \"documento\"], [\"id\", \"documento\", \"type\", \"string\", \"formControlName\", \"documento\", \"name\", \"documento\", \"required\", \"\"], [\"for\", \"endereco\"], [\"id\", \"endereco\", \"formControlName\", \"endereco\", \"name\", \"endereco\"], [\"for\", \"telefone\"], [\"id\", \"telefone\", \"formControlName\", \"telefone\", \"name\", \"telefone\"], [\"type\", \"submit\"], [3, \"ngSubmit\"], [\"for\", \"valor\"], [\"id\", \"valor\", \"type\", \"number\", \"name\", \"valor\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"dataVencimento\"], [\"id\", \"dataVencimento\", \"type\", \"date\", \"name\", \"dataVencimento\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"descricao\"], [\"id\", \"descricao\", \"name\", \"descricao\", 3, \"ngModel\", \"ngModelChange\"]],\n    template: function ClienteTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"Clientes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function ClienteTableComponent_Template_button_click_3_listener() {\n          return ctx.isAddingCliente = !ctx.isAddingCliente;\n        });\n        i0.ɵɵtext(4, \"Cadastrar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, ClienteTableComponent_div_5_Template, 25, 1, \"div\", 2);\n        i0.ɵɵtemplate(6, ClienteTableComponent_div_6_Template, 21, 3, \"div\", 2);\n        i0.ɵɵelementStart(7, \"table\")(8, \"thead\")(9, \"tr\")(10, \"th\");\n        i0.ɵɵtext(11, \"Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\");\n        i0.ɵɵtext(13, \"Nome\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Documento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Telefone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"Endereco\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"tbody\");\n        i0.ɵɵtemplate(21, ClienteTableComponent_tr_21_Template, 16, 5, \"tr\", 3);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAddingCliente);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentClienteId !== 0);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngForOf\", ctx.clientes);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i3.FormGroupDirective, i3.FormControlName],\n    styles: [\".container[_ngcontent-%COMP%] {\\n    max-width: 800px;\\n    margin: auto;\\n    padding: 20px;\\n    background-color: #f9f9f9;\\n    border-radius: 8px;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n    text-align: center;\\n}\\n\\nform[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    margin-bottom: 20px;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n    margin-bottom: 10px;\\n    padding: 8px;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n    padding: 10px;\\n    background-color: #007bff;\\n    color: white;\\n    border: none;\\n    border-radius: 5px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n    width: 100%;\\n    border-collapse: collapse;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n    border: 1px solid #ddd;\\n    padding: 8px;\\n    text-align: left;\\n}\\n\\nth[_ngcontent-%COMP%] {\\n    background-color: #f2f2f2;\\n}\\n\\n.modal[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    position: fixed;\\n    z-index: 1;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    overflow: auto;\\n    background-color: rgba(0, 0, 0, 0.5);\\n  }\\n  \\n  .modal-content[_ngcontent-%COMP%] {\\n    background-color: white;\\n    padding: 20px;\\n    border: 1px solid #888;\\n    width: 400px;\\n    border-radius: 5px;\\n  }\\n  \\n  .close[_ngcontent-%COMP%] {\\n    color: #aaa;\\n    float: right;\\n    font-size: 28px;\\n    font-weight: bold;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jbGllbnRlLXRhYmxlL2NsaWVudGUtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1osYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osWUFBWTtJQUNaLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCx5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSxzQkFBc0I7SUFDdEIsWUFBWTtJQUNaLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGVBQWU7SUFDZixVQUFVO0lBQ1YsT0FBTztJQUNQLE1BQU07SUFDTixXQUFXO0lBQ1gsWUFBWTtJQUNaLGNBQWM7SUFDZCxvQ0FBb0M7RUFDdEM7O0VBRUE7SUFDRSx1QkFBdUI7SUFDdkIsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsV0FBVztJQUNYLFlBQVk7SUFDWixlQUFlO0lBQ2YsaUJBQWlCO0VBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbn1cblxuaDEge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuZm9ybSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbmlucHV0IHtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIHBhZGRpbmc6IDhweDtcbn1cblxuYnV0dG9uIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG59XG5cbnRhYmxlIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xufVxuXG50aCwgdGQge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG59XG5cbnRoIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO1xufVxuXG4ubW9kYWwge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgei1pbmRleDogMTtcbiAgICBsZWZ0OiAwO1xuICAgIHRvcDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICB9XG4gIFxuICAubW9kYWwtY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjODg4O1xuICAgIHdpZHRoOiA0MDBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIH1cbiAgXG4gIC5jbG9zZSB7XG4gICAgY29sb3I6ICNhYWE7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICAgIGZvbnQtc2l6ZTogMjhweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"AAEA,SAAiCA,UAAU,QAAQ,gBAAgB;AACnE,SAASC,OAAO,QAAQ,MAAM;;;;;;;;;ICa5BC,8BAA2C;IAEnBA;MAAAA;MAAA;MAAA;IAAA,EAA4C;IAACA,sBAAO;IAAAA,iBAAO;IAC/EA,0BAAI;IAAAA,4BAAY;IAAAA,iBAAK;IACrBA,+BAAkE;IAAlCA;MAAAA;MAAA;MAAA,OAAYA,0CAAoB;IAAA,EAAC;IAC/DA,2BAAK;IACeA,qBAAK;IAAAA,iBAAQ;IAC/BA,4BAAyE;IAC3EA,iBAAM;IACNA,4BAAK;IACoBA,2BAAU;IAAAA,iBAAQ;IACzCA,6BAA0F;IAC5FA,iBAAM;IACNA,4BAAK;IACmBA,0BAAS;IAAAA,iBAAQ;IACvCA,6BAAgE;IAClEA,iBAAM;IACNA,4BAAK;IACmBA,0BAAS;IAAAA,iBAAQ;IACvCA,6BAAgE;IAClEA,iBAAM;IACNA,mCAAsB;IAAAA,kCAAiB;IAAAA,iBAAS;;;;IAjB5CA,eAAyB;IAAzBA,8CAAyB;;;;;;IAqBnCA,8BAAkD;IAE1BA;MAAAA;MAAA;MAAA,OAASA,kCAAY;IAAA,EAAC;IAACA,sBAAO;IAAAA,iBAAO;IACzDA,0BAAI;IAAAA,4BAAY;IAAAA,iBAAK;IACrBA,gCAAiC;IAA3BA;MAAAA;MAAA;MAAA,OAAYA,mCAAa;IAAA,EAAC;IAC9BA,2BAAK;IACgBA,sBAAM;IAAAA,iBAAQ;IACjCA,kCAAsF;IAAtDA;MAAAA;MAAA;MAAA,OAAaA,iDAAyB;IAAA,EAAP;IAA/DA,iBAAsF;IAExFA,4BAAK;IACyBA,iCAAgB;IAAAA,iBAAQ;IACpDA,kCAA+G;IAAxEA;MAAAA;MAAA;MAAA,OAAaA,2DAAkC;IAAA,EAAP;IAA/EA,iBAA+G;IAEjHA,4BAAK;IACoBA,qCAAU;IAAAA,iBAAQ;IACzCA,kCAA2E;IAArDA;MAAAA;MAAA;MAAA,OAAaA,sDAA6B;IAAA,EAAP;IAAzDA,iBAA2E;IAE7EA,mCAAsB;IAAAA,mCAAkB;IAAAA,iBAAS;;;;IAVfA,gBAA+B;IAA/BA,kDAA+B;IAIxBA,eAAwC;IAAxCA,2DAAwC;IAIzDA,eAAmC;IAAnCA,sDAAmC;;;;;;IAiB7DA,0BAAqC;IAC/BA,YAAgB;IAAAA,iBAAK;IACzBA,0BAAI;IAAAA,YAAkB;IAAAA,iBAAK;IAC3BA,0BAAI;IAAAA,YAAuB;IAAAA,iBAAK;IAChCA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;IAC/BA,0BAAI;IAAAA,aAAsB;IAAAA,iBAAK;IAC/BA,2BAAI;IAEMA;MAAA;MAAA;MAAA;MAAA,OAASA,wDAA6B;IAAA,EAAC;IAACA,mCAAkB;IAAAA,iBAAS;IAC3EA,kCAA4C;IAApCA;MAAA;MAAA;MAAA;MAAA,OAASA,oDAAyB;IAAA,EAAC;IAACA,wBAAO;IAAAA,iBAAS;;;;IAR1DA,eAAgB;IAAhBA,oCAAgB;IAChBA,eAAkB;IAAlBA,sCAAkB;IAClBA,eAAuB;IAAvBA,2CAAuB;IACvBA,eAAsB;IAAtBA,0CAAsB;IACtBA,eAAsB;IAAtBA,0CAAsB;;;AD3DlC,OAAM,MAAOC,qBAAqB;EAYhC;;;EAGAC,YAAoBC,cAA6B,EAASC,eAAgC,EAASC,EAAe;IAA9F,mBAAc,GAAdF,cAAc;IAAwB,oBAAe,GAAfC,eAAe;IAA0B,OAAE,GAAFC,EAAE;IAdrG;IACA,oBAAe,GAAY,KAAK;IAChC,mBAAc,GAAU;MAACC,SAAS,EAAE;IAAC,CAAC;IACtC,yBAAoB,GAAoB,IAAIP,OAAO,EAAU;IAC7D,qBAAgB,GAAW,KAAK;IAChC,aAAQ,GAAa,EAAE;IACvB,eAAU,GAAY;MAAEQ,EAAE,EAAE,CAAC;MAAEC,SAAS,EAAE,CAAC;MAAEC,SAAS,EAAE,EAAE;MAAEC,IAAI,EAAE,EAAE;MAACC,QAAQ,EAAE,EAAE;MAACC,QAAQ,EAAC;IAAE,CAAE;IAE/F,cAAS,GAAG,KAAK;IACjB,qBAAgB,GAAW,CAAC;IAC5B,gBAAW,GAAa;MAAEL,EAAE,EAAE,CAAC;MAAED,SAAS,EAAE,CAAC;MAAEO,KAAK,EAAE,CAAC;MAAEC,cAAc,EAAE,IAAIC,IAAI,EAAE;MAAEC,IAAI,EAAE,KAAK;MAAEC,SAAS,EAAE;IAAE,CAAE;IAK/G,IAAI,CAACC,WAAW,GAAG,IAAI,CAACb,EAAE,CAACc,KAAK,CAAC;MAC/BT,IAAI,EAAE,CAAC,EAAE,EAACZ,UAAU,CAACsB,QAAQ,CAAC;MAC9BX,SAAS,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACsB,QAAQ,CAAC;MACpCT,QAAQ,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACsB,QAAQ,CAAC;MACnCR,QAAQ,EAAE,CAAC,EAAE,EAAEd,UAAU,CAACsB,QAAQ;KACnC,CAAC;EACJ;EACA,IAAWC,YAAY;IACrB,OAAO,IAAI,CAACC,cAAc;EAC5B;EACA,IAAWD,YAAY,CAACE,KAAY;IAClC,IAAI,CAACD,cAAc,GAAGC,KAAK;EAC7B;EACAC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EACAA,YAAY;IACV,IAAI,CAACtB,cAAc,CAACsB,YAAY,EAAE,CAACC,SAAS,CAACC,QAAQ,IAAG;MACtD,IAAI,CAACA,QAAQ,GAAGA,QAAQ;MACxBC,OAAO,CAACC,GAAG,CAAC,WAAW,EAACF,QAAQ,CAAC;IACnC,CAAC,CAAC;EACJ;EACAG,WAAW,CAACC,OAAe;IACzB,IAAG,CAAC,IAAI,CAACC,SAAS,EAAC;MACjBJ,OAAO,CAACC,GAAG,CAAC,SAAS,EAACE,OAAO,CAAC;MAC9B;;IAEF,IAAI,CAAC5B,cAAc,CAAC2B,WAAW,CAACC,OAAO,CAAC;EAC1C;EAEAE,aAAa,CAAC3B,SAAgB;IAC5BsB,OAAO,CAACC,GAAG,CAAC,YAAY,EAACvB,SAAS,CAAC;IACnC,IAAI,CAACH,cAAc,CAAC8B,aAAa,CAAC3B,SAAS,CAAC,CAACoB,SAAS,CAACQ,CAAC,IAAG;MACzD,IAAI,CAACT,YAAY,EAAE;IACrB,CAAC,CAAC;EACJ;EAEAU,kBAAkB;IAChB;IACA,MAAM;MAAEzB,IAAI;MAAED,SAAS;MAAEE,QAAQ;MAAEC;IAAQ,CAAE,GAAG,IAAI,CAACM,WAAW,CAACK,KAAK;IACtE,IAAI,CAACa,eAAe,GAAG,CAAC,IAAI,CAACA,eAAe;EAC9C;EACAC,WAAW,CAACC,QAAgB;IAC1BV,OAAO,CAACC,GAAG,CAAC,WAAW,EAACS,QAAQ,CAAC;IACjC,IAAI,CAACC,gBAAgB,GAAGD,QAAQ;EAClC;EACA;EACAE,iBAAiB,CAAClC,SAAiB;IACjC,IAAI,CAACmC,gBAAgB,GAAGnC,SAAS;IACjC,IAAI,CAACoC,WAAW,CAACpC,SAAS,GAAGA,SAAS;IACtC;IACA,IAAI,CAACiC,gBAAgB,GAAG,IAAI;IAC5B;IACAX,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAC,IAAI,CAACY,gBAAgB,CAAC;EAE7D;EAEAE,eAAe,CAACC,QAAkB;IAChChB,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEe,QAAQ,CAAC;EAC9C;EACAC,SAAS,CAACvC,SAAiB;IACzB,IAAGA,SAAS,KAAK,CAAC,EAAC;MACjB;;IAEF,IAAI,CAACoC,WAAW,CAACpC,SAAS,GAAGA,SAAS;EACxC;EAGAwC,UAAU;IACR,IAAI,CAACL,gBAAgB,GAAG,CAAC;EAC3B;EAEAM,WAAW;IACTnB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAC,IAAI,CAACa,WAAW,CAAC;IACzC,IAAI,CAACA,WAAW,CAACpC,SAAS,GAAG,IAAI,CAACmC,gBAAgB;IAClD,IAAI,CAACrC,eAAe,CAAC4C,cAAc,CAAC,IAAI,CAACN,WAAW,CAAC,CAAChB,SAAS,CAACkB,QAAQ,IAAG;MACzE;MACA,IAAI,CAACE,UAAU,EAAE;IACnB,CAAC,CAAC;EACJ;EAAC;qBA/FU7C,qBAAqB;EAAA;EAAA;UAArBA,qBAAqB;IAAAgD;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCnBlCrD,8BAAuB;QACjBA,wBAAQ;QAAAA,iBAAK;QAajBA,iCAAqD;QAA7CA;UAAA;QAAA,EAA4C;QAACA,yBAAS;QAAAA,iBAAS;QAEvEA,uEAwBM;QACNA,uEAoBM;QACNA,6BAAQ;QAGEA,mBAAE;QAAAA,iBAAK;QACXA,2BAAI;QAAAA,qBAAI;QAAAA,iBAAK;QACbA,2BAAI;QAAAA,0BAAS;QAAAA,iBAAK;QAClBA,2BAAI;QAAAA,yBAAQ;QAAAA,iBAAK;QACjBA,2BAAI;QAAAA,yBAAQ;QAAAA,iBAAK;QAGrBA,8BAAO;QACLA,uEAWK;QACPA,iBAAQ;;;QArEUA,eAAqB;QAArBA,0CAAqB;QAyBrBA,eAA4B;QAA5BA,iDAA4B;QAgCpBA,gBAAW;QAAXA,sCAAW","names":["Validators","Subject","i0","ClienteTableComponent","constructor","clienteService","cobrancaService","fb","clienteId","id","usuarioId","documento","nome","telefone","endereco","valor","dataVencimento","Date","pago","descricao","clienteForm","group","required","inputToChild","addCobrancaMsg","value","ngOnInit","loadClientes","subscribe","clientes","console","log","editCliente","cliente","isEditing","deleteCliente","_","addOrUpdateCliente","isAddingCliente","toggleModal","newState","isAddingCobranca","openCobrancaModal","currentClienteId","newCobranca","onCobrancaAdded","cobranca","openModal","closeModal","addCobranca","createCobranca","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/adnangonzaga/repos/LocalizaClientes/Localiza.Web/ClientApp/src/app/components/cliente-table/cliente-table.component.ts","/home/adnangonzaga/repos/LocalizaClientes/Localiza.Web/ClientApp/src/app/components/cliente-table/cliente-table.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnChanges, Output, SimpleChanges,EventEmitter, Input } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { Cliente } from 'src/app/services/cliente.model';\nimport { ClienteService } from 'src/app/services/cliente.service';\nimport { Cobranca } from 'src/app/services/cobranca.model';\nimport { CobrancaService } from 'src/app/services/cobranca.service';\ninterface CreateClienteRequest {\n  nome: string\n  documento: string \n  endereco: string\n  telefone: string\n}\n@Component({\n  selector: 'app-cliente-table',\n  templateUrl: './cliente-table.component.html',\n  styleUrls: ['./cliente-table.component.css']\n})\nexport class ClienteTableComponent {  \n  // clienteService: ClienteService\n  isAddingCliente: boolean = false\n  addCobrancaMsg:object = {clienteId: 0}\n  initAddCobrancaEvent: Subject<number> = new Subject<number>();\n  isAddingCobranca:boolean = false\n  clientes:Cliente[] = []\n  newCliente: Cliente = { id: 0, usuarioId: 0, documento: '', nome: '',telefone: '',endereco:'' };\n  clienteForm: FormGroup;\n  isEditing = false;\n  currentClienteId: number = 0;  \n  newCobranca: Cobranca = { id: 0, clienteId: 0, valor: 0, dataVencimento: new Date(), pago: false, descricao: '' };\n  /**\n   *\n   */\n  constructor(private clienteService:ClienteService,private cobrancaService: CobrancaService,private fb: FormBuilder) {        \n    this.clienteForm = this.fb.group({\n      nome: ['',Validators.required],\n      documento: ['', Validators.required],\n      telefone: ['', Validators.required],\n      endereco: ['', Validators.required]\n    });\n  }\n  public get inputToChild(): object{\n    return this.addCobrancaMsg\n  }  \n  public set inputToChild(value:object) {\n    this.addCobrancaMsg = value\n  }\n  ngOnInit(): void {\n    this.loadClientes()\n  }\n  loadClientes(){\n    this.clienteService.loadClientes().subscribe(clientes => {\n      this.clientes = clientes;\n      console.log('clientes:',clientes)\n    });\n  }\n  editCliente(cliente:Cliente) {    \n    if(!this.isEditing){\n      console.log('client:',cliente)\n      return;\n    }\n    this.clienteService.editCliente(cliente)\n  }\n\n  deleteCliente(clienteId:number) {\n    console.log('clienteId:',clienteId)\n    this.clienteService.deleteCliente(clienteId).subscribe(_ => {      \n      this.loadClientes()\n    });\n  }  \n\n  addOrUpdateCliente() {\n    // this.clienteForm\n    const { nome, documento, telefone, endereco } = this.clienteForm.value\n    this.isAddingCliente = !this.isAddingCliente\n  }  \n  toggleModal(newState:boolean){\n    console.log('newState:',newState)\n    this.isAddingCobranca = newState\n  }\n  // cobranca operations\n  openCobrancaModal(clienteId: number): void {    \n    this.currentClienteId = clienteId;        \n    this.newCobranca.clienteId = clienteId\n    // this.initAddCobrancaEvent.next(clienteId)\n    this.isAddingCobranca = true\n    // this.onAddCobrancaClick.emit(this.currentClienteId)\n    console.log('this.currentClienteId:',this.currentClienteId)\n    \n  }\n\n  onCobrancaAdded(cobranca: Cobranca): void {    \n    console.log('New Cobranca Added:', cobranca);\n  }\n  openModal(clienteId: number): void {\n    if(clienteId === 0){\n      return;\n    }    \n    this.newCobranca.clienteId = clienteId;            \n  }\n\n\n  closeModal(): void {    \n    this.currentClienteId = 0\n  }\n\n  addCobranca(): void {\n    console.log('cobranca:',this.newCobranca)\n    this.newCobranca.clienteId = this.currentClienteId\n    this.cobrancaService.createCobranca(this.newCobranca).subscribe(cobranca => {\n      // this.cobrancaAdded.emit(cobranca);\n      this.closeModal();\n    });\n  }\n}\n","<div class=\"container\">\n  <h1>Clientes</h1>\n  <!-- <form [formGroup]=\"clienteForm\" (ngSubmit)=\"addOrUpdateCliente()\">\n    <input formControlName=\"nome\" placeholder=\"Nome\" required>\n    <input formControlName=\"documento\" type=\"text\" placeholder=\"Documento\" required>\n    <input formControlName=\"telefone\" type=\"text\" placeholder=\"Telefone\" required>\n    <input formControlName=\"endereco\" type=\"text\" placeholder=\"Endereco\" required>\n    <button type=\"submit\">{{ isEditing ? 'Atualizar' : 'Cadastrar' }}</button>\n  </form> -->\n  <!-- <app-cobranca-modal   \n    [addCobrancaEvent]=\"initAddCobrancaEvent.asObservable()\" \n    (cobrancaAdded)=\"onCobrancaAdded($event)\"\n    (modalStateChange)=\"toggleModal($event)\"    \n    *ngIf=\"isAddingCobranca\"></app-cobranca-modal> -->    \n  <button (click)=\"isAddingCliente = !isAddingCliente\">Cadastrar</button>\n  <!-- Cliente Modal Form -->\n  <div class=\"modal\" *ngIf=\"isAddingCliente\">\n    <div class=\"modal-content\">\n      <span class=\"close\" (click)=\"isAddingCliente = !isAddingCliente\">&times;</span>\n      <h2>Add Cobranca</h2>\n      <form [formGroup]=\"clienteForm\" (ngSubmit)=\"addOrUpdateCliente()\">        \n        <div>\n          <label for=\"nome\">Nome:</label>\n          <input id=\"nome\" type=\"text\" formControlName=\"nome\" name=\"nome\" required>\n        </div>\n        <div>\n          <label for=\"documento\">Documento:</label>\n          <input id=\"documento\" type=\"string\" formControlName=\"documento\" name=\"documento\" required>\n        </div>\n        <div>\n          <label for=\"endereco\">Endereco:</label>\n          <input id=\"endereco\" formControlName=\"endereco\" name=\"endereco\">\n        </div>\n        <div>\n          <label for=\"telefone\">Telefone:</label>\n          <input id=\"telefone\" formControlName=\"telefone\" name=\"telefone\">\n        </div>\n        <button type=\"submit\">Registrar Cliente</button>\n      </form>\n    </div>\n  </div>\n  <div class=\"modal\" *ngIf=\"currentClienteId !== 0\">\n    <div class=\"modal-content\">\n      <span class=\"close\" (click)=\"closeModal()\">&times;</span>\n      <h2>Add Cobranca</h2>\n      <form (ngSubmit)=\"addCobranca()\">        \n        <div>\n          <label for=\"valor\">Valor:</label>\n          <input id=\"valor\" type=\"number\" [(ngModel)]=\"newCobranca.valor\" name=\"valor\" required>\n        </div>\n        <div>\n          <label for=\"dataVencimento\">Data Vencimento:</label>\n          <input id=\"dataVencimento\" type=\"date\" [(ngModel)]=\"newCobranca.dataVencimento\" name=\"dataVencimento\" required>\n        </div>\n        <div>\n          <label for=\"descricao\">Descrição:</label>\n          <input id=\"descricao\" [(ngModel)]=\"newCobranca.descricao\" name=\"descricao\">\n        </div>\n        <button type=\"submit\">Registrar Cobranca</button>\n      </form>\n    </div>\n  </div>\n  <table >\n    <thead>\n      <tr>\n        <th>Id</th>\n        <th>Nome</th>\n        <th>Documento</th>\n        <th>Telefone</th>          \n        <th>Endereco</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let cliente of clientes\">\n        <td>{{ cliente.id }}</td>\n        <td>{{ cliente.nome }}</td>\n        <td>{{ cliente.documento }}</td>\n        <td>{{ cliente.telefone }}</td>\n        <td>{{ cliente.endereco }}</td>\n        <td>\n          <!-- <button (click)=\"editCliente(cliente)\">Editar</button> -->\n          <button (click)=\"openCobrancaModal(cliente.id)\">Adicionar Cobranca</button>\n          <button (click)=\"deleteCliente(cliente.id)\">Excluir</button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  \n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}